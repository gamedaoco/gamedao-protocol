# GIP-006: Unified ID and Name System Architecture

**Status:** Partially Implemented
**Type:** Core Protocol Enhancement
**Created:** 2025-01-03
**Updated:** 2025-01-04
**Authors:** GameDAO Core Team

## Abstract

This proposal introduces a unified identifier and human-readable name system for GameDAO protocol entities, replacing the current mixed ID system with a consistent hierarchical approach using the GameId library and introducing a name registry with economic incentives.

**Implementation Status (2025-01-04):** The foundational GameId library and Identity module have been implemented, with the name registry system ready for deployment.

## Motivation

The current GameDAO protocol uses inconsistent identifier systems:
- Organizations: 8-character alphanumeric IDs (bytes8)
- Proposals: 32-byte hashes (bytes32)
- Campaigns: 32-byte hashes (bytes32)
- Profiles: Not yet implemented

This inconsistency creates:
- Poor user experience with long, unmemorable identifiers
- Inconsistent URL structures
- Difficulty in cross-referencing entities
- No human-readable naming system

## Specification

### 1. Unified ID System

All entities use hierarchical identifiers generated by the GameId library:

#### ID Format Structure
- **Organizations**: `GAMEDAO-O-ORG001` (protocol + type + sequence)
- **Proposals**: `GAMEDAO-P-PROP001` (protocol + type + sequence)
- **Campaigns**: `GAMEDAO-C-CAMP001` (protocol + type + sequence)
- **Profiles**: `GAMEDAO-U-USER001` (protocol + type + sequence)

#### Technical Implementation
```solidity
// GameId library implementation (IMPLEMENTED)
library GameId {
    function generate(string memory entityType, uint256 sequence) internal pure returns (string memory) {
        return string(abi.encodePacked(
            "GAMEDAO-",
            entityType,
            "-",
            _formatSequence(sequence)
        ));
    }

    function _formatSequence(uint256 sequence) internal pure returns (string memory) {
        return string(abi.encodePacked(
            _getAlphaPrefix(sequence),
            _padNumber(sequence % 1000, 3)
        ));
    }
}
```

### 2. Identity Module (IMPLEMENTED)

The Identity module has been implemented with the following features:

#### Core Features
- **Profile Management**: Complete user profile system with GameId integration
- **Name Claiming**: GAME token staking for human-readable names
- **Profile Verification**: Three-tier verification system (Basic, Enhanced, Premium)
- **Organization Relationships**: Profile-organization association tracking

#### Contract Size: 13.144 KiB (55% of 24KB limit)

#### Key Functions
```solidity
interface IIdentity {
    function createProfile(string memory name, string memory bio, string memory avatarUrl) external;
    function claimName(string memory name, uint256 stakeAmount) external;
    function verifyProfile(string memory profileId, VerificationLevel level) external;
    function getProfile(string memory profileId) external view returns (Profile memory);
    function getProfileByName(string memory name) external view returns (Profile memory);
}
```

### 3. SenseSimplified Module (IMPLEMENTED)

The Sense module has been refactored into a simplified version focused on core reputation functionality:

#### Core Features
- **Reputation Scoring**: 1000-scale multiplier system
- **Experience Points (XP)**: Comprehensive XP tracking and awarding
- **Trust Scoring**: Positive/negative interaction tracking
- **Voting Weight**: Reputation-based voting weight calculation

#### Contract Size: 9.826 KiB (41% of 24KB limit)

#### Key Functions
```solidity
interface ISenseSimplified {
    function awardXP(string memory profileId, uint256 amount, string memory reason) external;
    function updateReputation(string memory profileId, int256 change, string memory reason) external;
    function recordTrustInteraction(string memory fromProfile, string memory toProfile, bool isPositive) external;
    function getReputationScore(string memory profileId) external view returns (uint256);
    function getTrustScore(string memory profileId) external view returns (uint256);
}
```

### 4. Module Separation Benefits

The separation of Identity and Sense modules provides:

#### Size Optimization
- **Original Sense**: 41.772 KiB (1.7x over limit)
- **Identity**: 13.144 KiB (55% of limit)
- **SenseSimplified**: 9.826 KiB (41% of limit)
- **Total**: 22.970 KiB (savings of ~18.8 KiB)

#### Architectural Benefits
- **Single Responsibility**: Each module has a clear, focused purpose
- **Maintainability**: Easier to update and extend individual modules
- **Testability**: Isolated testing of specific functionality
- **Upgradability**: Independent module upgrades without affecting others

### 5. Future Extensibility

The modular architecture enables future extensions:

#### Planned Extensions
1. **Social Module**: User interactions, messaging, social features
2. **Achievement Module**: Comprehensive achievement and badge system
3. **Interoperability Module**: Cross-DAO interactions and reputation portability
4. **Analytics Module**: Advanced reputation analytics and insights

#### Extension Architecture
```solidity
// Future module interface pattern
interface IGameDAOModule {
    function moduleId() external pure returns (string memory);
    function version() external pure returns (uint256);
    function dependencies() external pure returns (string[] memory);
    function initialize(address registry) external;
}
```

#### Intermodule Communication
- **Registry Pattern**: Central registry for module discovery
- **Event System**: Cross-module communication via events
- **Interface Contracts**: Standardized interfaces for module interaction
- **Dependency Injection**: Modules can reference other modules through registry

### 6. URL Structure

#### Current Implementation
- Organizations: `/control/GAMEDAO-O-ORG001`
- Proposals: `/signal/GAMEDAO-P-PROP001`
- Campaigns: `/flow/GAMEDAO-C-CAMP001`
- Profiles: `/user/GAMEDAO-U-USER001`

#### With Name Registry (Planned)
- Organizations: `/control/GAMEDAO` or `/control/GAMEDAO-O-ORG001`
- Proposals: `/signal/GAMEDAO-P-PROP001` or `/signal/awesome-proposal`
- Campaigns: `/flow/GAMEDAO-C-CAMP001` or `/flow/epic-campaign`
- Profiles: `/user/alice` or `/user/GAMEDAO-U-USER001`

### 7. Migration Strategy

#### Phase 1: Core Implementation (COMPLETED)
- âœ… GameId library implementation
- âœ… Identity module deployment
- âœ… SenseSimplified module deployment
- âœ… Module integration testing

#### Phase 2: Name Registry Enhancement (IN PROGRESS)
- ðŸ”„ Enhanced name registry with economic incentives
- ðŸ”„ Frontend name resolution integration
- ðŸ”„ Name management UI components
- ðŸ”„ Governance mechanisms for disputes

#### Phase 3: Frontend Integration (PLANNED)
- ðŸ“‹ Complete URL routing update
- ðŸ“‹ Name-based navigation
- ðŸ“‹ Enhanced search functionality
- ðŸ“‹ User experience optimization

#### Phase 4: Advanced Features (PLANNED)
- ðŸ“‹ Social module implementation
- ðŸ“‹ Achievement system
- ðŸ“‹ Cross-DAO interoperability
- ðŸ“‹ Advanced analytics

## Implementation Details

### Current Contract Status

#### Deployed Contracts
- âœ… `GameId.sol`: Hierarchical ID generation library
- âœ… `Identity.sol`: Profile and name management
- âœ… `SenseSimplified.sol`: Reputation and trust scoring
- âœ… Updated deployment scripts

#### Integration Points
- **Identity â†” Sense**: Profile validation for reputation operations
- **Identity â†” Control**: Organization membership verification
- **Sense â†” Signal**: Reputation-based voting weights
- **Sense â†” Flow**: Trust scoring for campaign validation

### Gas Optimization Achievements

The new modular system provides significant gas optimizations:
- **Reduced Storage**: Hierarchical IDs reduce storage overhead
- **Efficient Queries**: Optimized data structures for common operations
- **Batch Operations**: Support for bulk reputation updates
- **Selective Loading**: Only load required modules for operations

### Security Enhancements

1. **Access Control**: Proper role-based permissions across modules
2. **Reentrancy Protection**: Comprehensive protection in all modules
3. **Input Validation**: Robust validation for all user inputs
4. **Event Logging**: Complete audit trail for all operations

## Economic Impact

### Current Implementation
- **Name Claiming**: 1000 GAME token staking requirement
- **Profile Verification**: Tiered verification costs
- **Reputation Incentives**: XP rewards for positive contributions

### Future Enhancements
- **Name Trading**: Secondary market for claimed names
- **Reputation Staking**: Stake reputation for higher privileges
- **Cross-DAO Value**: Portable reputation across DAOs

## Testing Strategy

### Completed Testing
- âœ… Unit tests for GameId library
- âœ… Integration tests for Identity module
- âœ… Reputation system validation
- âœ… Gas usage optimization testing

### Ongoing Testing
- ðŸ”„ End-to-end user flows
- ðŸ”„ Performance benchmarking
- ðŸ”„ Security audit preparation
- ðŸ”„ Load testing for production

## Success Metrics

### Phase 1 Achievements (Current)
- âœ… Contract size under 24KB limit for both modules
- âœ… Hierarchical ID system implementation
- âœ… Basic name claiming functionality
- âœ… Reputation scoring system

### Phase 2 Targets (Next 4 weeks)
- ðŸ“Š 90% of test users successfully create profiles
- ðŸ“Š Name claiming system with economic incentives
- ðŸ“Š Frontend integration for name resolution
- ðŸ“Š Performance benchmarks meeting targets

### Long-term Goals (6 months)
- ðŸ“Š 1000+ active profiles with claimed names
- ðŸ“Š 50,000+ GAME tokens locked in name stakes
- ðŸ“Š Cross-module interactions functioning smoothly
- ðŸ“Š Foundation for future module extensions

## Risks and Mitigation

### Technical Risks
- **Module Complexity**: Mitigated by clear interfaces and documentation
- **Gas Costs**: Optimized through efficient data structures
- **Upgrade Compatibility**: Versioned interfaces for backward compatibility

### Economic Risks
- **Name Speculation**: Governance mechanisms for dispute resolution
- **Adoption Challenges**: Gradual rollout with user incentives
- **Token Volatility**: Adjustable economic parameters

## Future Roadmap

### Q1 2025
- Complete name registry enhancement
- Frontend integration
- Basic social features

### Q2 2025
- Achievement system implementation
- Cross-DAO interoperability
- Advanced analytics

### Q3 2025
- Mobile app integration
- Advanced social features
- Reputation marketplace

### Q4 2025
- Multi-chain expansion
- Advanced governance features
- Ecosystem partnerships

## Conclusion

The implementation of the Identity and SenseSimplified modules represents a significant milestone in GameDAO's evolution. The modular architecture provides a solid foundation for future extensions while maintaining contract size limits and gas efficiency.

The hierarchical ID system with GameId library integration offers a scalable solution for entity identification, while the separated concerns between Identity and Sense modules enable focused development and maintenance.

Future extensibility is built into the architecture, allowing for seamless addition of new modules and features without disrupting existing functionality.

## References

- [GameId Library Implementation](../../packages/contracts-solidity/contracts/libraries/GameId.sol)
- [Identity Module](../../packages/contracts-solidity/contracts/modules/Identity/Identity.sol)
- [SenseSimplified Module](../../packages/contracts-solidity/contracts/modules/Sense/SenseSimplified.sol)
- [Deployment Scripts](../../packages/contracts-solidity/scripts/deploy.ts)
- [Module Architecture Documentation](../protocol/README.md)

---

**Last Updated:** 2025-01-04
**Implementation Status:** Identity and SenseSimplified modules deployed and tested
**Next Milestone:** Name registry enhancement and frontend integration
